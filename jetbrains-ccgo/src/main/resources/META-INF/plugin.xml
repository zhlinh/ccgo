<idea-plugin>
    <id>com.ccgo.plugin</id>
    <name>CCGO - C++ Cross-Platform Build</name>
    <vendor email="zhlinhng@gmail.com" url="https://github.com/zhlinh/ccgo">CCGO</vendor>

    <description><![CDATA[
    <h2>CCGO - C++ Cross-Platform Build System</h2>
    <p>A comprehensive IDE integration for CCGO, the C++ cross-platform build system and project manager.</p>

    <h3>Features</h3>
    <ul>
        <li><b>CCGO.toml Support</b>: Syntax highlighting, validation, and auto-completion for CCGO configuration files</li>
        <li><b>Build Integration</b>: Run CCGO builds directly from the IDE with run configurations</li>
        <li><b>Dependency Management</b>: Visualize project dependencies in a dedicated tool window</li>
        <li><b>Multi-Platform Support</b>: Build for Android, iOS, macOS, Windows, Linux, OpenHarmony, and KMP</li>
        <li><b>Code Snippets</b>: Live templates for common CCGO.toml patterns</li>
    </ul>

    <h3>Supported Platforms</h3>
    <ul>
        <li>Android (AAR)</li>
        <li>iOS / macOS (XCFramework)</li>
        <li>Windows (DLL/LIB)</li>
        <li>Linux (SO/A)</li>
        <li>OpenHarmony (HAR)</li>
        <li>Kotlin Multiplatform</li>
    </ul>

    <h3>Usage</h3>
    <ol>
        <li>Open a project containing a <code>CCGO.toml</code> file</li>
        <li>Use the CCGO menu in Tools to build, test, or manage dependencies</li>
        <li>View dependencies in the CCGO Dependencies tool window</li>
        <li>Create run configurations for different platforms and build types</li>
    </ol>
    ]]></description>

    <!-- Compatibility with IntelliJ Platform products -->
    <depends>com.intellij.modules.platform</depends>
    <depends>org.toml.lang</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Application Settings -->
        <applicationService
                serviceImplementation="com.ccgo.plugin.settings.CcgoSettings"/>
        <applicationConfigurable
                parentId="tools"
                instance="com.ccgo.plugin.settings.CcgoSettingsConfigurable"
                id="com.ccgo.plugin.settings"
                displayName="CCGO"/>

        <!-- Project Service -->
        <projectService
                serviceImplementation="com.ccgo.plugin.CcgoProjectService"/>

        <!-- JSON Schema for CCGO.toml validation -->
        <json.schemaProviderFactory
                implementation="com.ccgo.plugin.schema.CcgoSchemaProviderFactory"/>

        <!-- Tool Window for Dependency Tree -->
        <toolWindow
                id="CCGO Dependencies"
                anchor="right"
                icon="/icons/ccgo_13.svg"
                factoryClass="com.ccgo.plugin.toolwindow.DependencyTreeToolWindowFactory"/>

        <!-- Run Configuration -->
        <configurationType
                implementation="com.ccgo.plugin.run.CcgoRunConfigurationType"/>
        <runConfigurationProducer
                implementation="com.ccgo.plugin.run.CcgoRunConfigurationProducer"/>

        <!-- Live Templates -->
        <defaultLiveTemplates file="/liveTemplates/ccgo.xml"/>
        <liveTemplateContext
                implementation="com.ccgo.plugin.completion.CcgoTomlContext"/>

        <!-- Completion Contributor -->
        <completion.contributor
                language="TOML"
                implementationClass="com.ccgo.plugin.completion.CcgoCompletionContributor"/>

        <!-- Startup Activity -->
        <postStartupActivity
                implementation="com.ccgo.plugin.CcgoStartupActivity"/>

        <!-- Notifications -->
        <notificationGroup
                id="CCGO Notifications"
                displayType="BALLOON"/>
    </extensions>

    <actions>
        <!-- CCGO Action Group in Tools Menu -->
        <group id="Ccgo.ActionGroup"
               text="CCGO"
               description="CCGO build system actions"
               popup="true"
               icon="/icons/ccgo_13.svg">
            <add-to-group group-id="ToolsMenu" anchor="last"/>

            <action id="Ccgo.Build"
                    class="com.ccgo.plugin.actions.CcgoBuildAction"
                    text="Build..."
                    description="Build CCGO project for a specific platform"
                    icon="AllIcons.Actions.Compile"/>

            <action id="Ccgo.Test"
                    class="com.ccgo.plugin.actions.CcgoTestAction"
                    text="Run Tests"
                    description="Run CCGO project tests"
                    icon="AllIcons.RunConfigurations.TestState.Run"/>

            <action id="Ccgo.Bench"
                    class="com.ccgo.plugin.actions.CcgoBenchAction"
                    text="Run Benchmarks"
                    description="Run CCGO project benchmarks"
                    icon="AllIcons.Actions.ProfileCPU"/>

            <action id="Ccgo.Install"
                    class="com.ccgo.plugin.actions.CcgoInstallAction"
                    text="Install Dependencies"
                    description="Install project dependencies"
                    icon="AllIcons.Actions.Download"/>

            <separator/>

            <action id="Ccgo.Clean"
                    class="com.ccgo.plugin.actions.CcgoCleanAction"
                    text="Clean"
                    description="Clean build artifacts"
                    icon="AllIcons.Actions.GC"/>

            <action id="Ccgo.GenerateIdeProject"
                    class="com.ccgo.plugin.actions.CcgoGenerateIdeProjectAction"
                    text="Generate IDE Project"
                    description="Generate platform-specific IDE project"
                    icon="AllIcons.Actions.AddFile"/>

            <action id="Ccgo.Doc"
                    class="com.ccgo.plugin.actions.CcgoDocAction"
                    text="Generate Documentation"
                    description="Generate CCGO project documentation"
                    icon="AllIcons.Toolwindows.Documentation"/>

            <action id="Ccgo.Check"
                    class="com.ccgo.plugin.actions.CcgoCheckAction"
                    text="Check Environment"
                    description="Check CCGO environment dependencies"
                    icon="AllIcons.Actions.Checked"/>

            <separator/>

            <action id="Ccgo.Publish"
                    class="com.ccgo.plugin.actions.CcgoPublishAction"
                    text="Publish Package..."
                    description="Publish package to repository"
                    icon="AllIcons.Actions.Upload"/>

            <action id="Ccgo.Tag"
                    class="com.ccgo.plugin.actions.CcgoTagAction"
                    text="Create Version Tag"
                    description="Create git tag from CCGO.toml version"
                    icon="AllIcons.Vcs.BranchNode"/>

            <action id="Ccgo.Package"
                    class="com.ccgo.plugin.actions.CcgoPackageAction"
                    text="Package SDK"
                    description="Package SDK for distribution"
                    icon="AllIcons.FileTypes.Archive"/>

            <action id="Ccgo.Tree"
                    class="com.ccgo.plugin.actions.CcgoTreeAction"
                    text="Show Dependency Tree"
                    description="Show dependency tree in terminal"
                    icon="AllIcons.Actions.ShowAsTree"/>

            <separator/>

            <action id="Ccgo.RefreshDependencies"
                    class="com.ccgo.plugin.actions.CcgoRefreshDependenciesAction"
                    text="Refresh Dependencies"
                    description="Refresh the dependency tree view"
                    icon="AllIcons.Actions.Refresh"/>
        </group>

        <!-- Context Menu for CCGO.toml files -->
        <group id="Ccgo.EditorContextGroup">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <reference ref="Ccgo.ActionGroup"/>
        </group>

        <!-- Project View Context Menu -->
        <group id="Ccgo.ProjectViewGroup">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
            <reference ref="Ccgo.ActionGroup"/>
        </group>
    </actions>
</idea-plugin>
